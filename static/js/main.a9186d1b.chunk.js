(this["webpackJsonpricebook-frontend"]=this["webpackJsonpricebook-frontend"]||[]).push([[0],{15:function(e,t,n){},44:function(e,t,n){e.exports=n(75)},71:function(e,t,n){e.exports=n.p+"static/media/landing.e5f2f68b.svg"},73:function(e,t,n){e.exports=n.p+"static/media/new-post.96244dfc.svg"},74:function(e,t,n){e.exports=n.p+"static/media/add-image.a1ebff36.svg"},75:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(24),u=n(9),o=n(21),s=n(42),l="RESET",c="SET_USERNAME",d="SET_DISPLAY",p="SET_STATUS",m="SET_FOLLOWING",h="SET_BIRTH",f="SET_EMAIL",g="SET_PHONE",b="SET_ZIP",v="SET_AVATAR",E="SET_ARTICLES",y="ADD_ARTICLES",O={username:"",display:"",status:"",following:[],birth:"",email:"",phone:"",zip:"",avatar:"",articles:[]};var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return O;case c:return Object.assign({},e,{username:t.payload});case d:return Object.assign({},e,{display:t.payload});case p:return Object.assign({},e,{status:t.payload});case m:return Object.assign({},e,{following:t.payload});case h:return Object.assign({},e,{birth:t.payload});case f:return Object.assign({},e,{email:t.payload});case g:return Object.assign({},e,{phone:t.payload});case b:return Object.assign({},e,{zip:t.payload});case v:return Object.assign({},e,{avatar:t.payload});case E:return Object.assign({},e,{articles:t.payload});case y:return Object.assign({},e,{articles:JSON.parse(JSON.stringify(e.articles)).concat(t.payload).sort((function(e,t){return new Date(t.date).getTime()-new Date(e.date).getTime()}))});default:return e}},j=Object(o.c)(w,Object(o.a)(s.a)),k=n(1),C=n(2),S=n(4),x=n(3),N=n(5),_=n(22),D=n(19),A=n(26),I=n(8),z=n(16),M=n.n(z),B=n(7),T=n.n(B);T.a.defaults.withCredentials=!0;var P="https://backend-ricebook.herokuapp.com",J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return T.a.get(P+"/display/"+e).then((function(e){return e.data}),(function(e){return e.response.data}))},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return T.a.get(P+"/headline/"+e).then((function(e){return e.data}),(function(e){return e.response.data}))},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return T.a.get(P+"/avatar/"+e).then((function(e){return e.data}),(function(e){return e.response.data}))},L=function(e){return T.a.post(P+"/register",e).then((function(e){return e.data}),(function(e){return e.response.data}))};function R(){return{type:l}}function U(e){return{type:c,payload:e}}function V(e){return{type:d,payload:e}}function Y(e){return{type:p,payload:e}}function Z(e){return{type:m,payload:e}}function $(e){return{type:f,payload:e}}function H(e){return{type:g,payload:e}}function W(e){return{type:b,payload:e}}function G(e){return{type:v,payload:e}}function K(e){return{type:E,payload:e}}function Q(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),a=0;a<n.length;a++){for(var r=n[a];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""}function X(e,t,n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3);var r="expires="+a.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"}var ee={display:"Names must be contain only letters",username:"Username name must begin with a letter and contain only numbers and letters",zip:"Zip must follow standard zip format xxxxx or xxxxx-xxxx",email:"Email address must follow standard email format xxx@xxx.xxx",phone:"Phone number must follow standard phone format xxxxxxxxxx",dob:"You must be 18 or older to register",password:"Passwords must be 6 or more characters and match",exists:"Account already exists, please try another"},te={display:"[a-zA-Z\\-]+ [a-zA-Z\\-]+$",username:"[a-zA-Z]+[a-zA-Z0-9]*$",zip:"\\d{5}([\\-]\\d{4})?$",email:"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$",phone:"\\d{3}\\d{3}\\d{4}$",dob:"^\\d{4}(\\-)(((0)[0-9])|((1)[0-2]))(\\-)([0-2][0-9]|(3)[0-1])$",password:"[ -~]{6,}$"},ne=function(){return function(e){return""!==Q("loggedIn")&&(e(U(Q("loggedIn"))),!0)}},ae=function(e,t){return function(n){return function(e,t){return T.a.post(P+"/login",{username:e,password:t}).then((function(e){return e.data}),(function(e){return e.response.data}))}(e,t).then((function(e){return"success"!==e.result?e.message:(X("loggedIn",e.username,7),n(U(e.username)),"")}))}},re=function(){return function(e){return T.a.get(P+"/loggedin").then((function(e){return e.data})).then((function(t){"success"!==t.result&&(X("loggedIn","",0),e(U(""))),X("loggedIn",t.username,7),e(U(t.username))}))}},ie=function(e){var t=function(e){var t=new Date,n=new Date(e),a=t.getFullYear()-n.getFullYear(),r=t.getMonth()-n.getMonth();return(r<0||0===r&&t.getDate()<n.getDate())&&a--,a};return function(n){var a,r,i;return M.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:n(R()),a=0;case 2:if(!(a<Object.keys(te).length)){u.next=13;break}if(r=Object.keys(te)[a],RegExp(te[r]).test(e[0][r])){u.next=6;break}return u.abrupt("return",ee[r]);case 6:if(!("dob"===r&&t(e[0].dob)<18)){u.next=8;break}return u.abrupt("return",ee.dob);case 8:if("password"!==r||e[0].password===e[1]){u.next=10;break}return u.abrupt("return",ee.password);case 10:a++,u.next=2;break;case 13:return i="Registration successful. Please login.",u.next=16,M.a.awrap(L(e[0]).then((function(e){"failed"===e.result&&(i=e.message)})));case 16:return u.abrupt("return",i);case 17:case"end":return u.stop()}}))}},ue=function(){return function(e){T.a.put(P+"/logout").finally(),e(R()),X("loggedIn","",0)}},oe=function(e){return function(t,n){var a,r;return M.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return a=RegExp(e.filter),i.next=3,M.a.awrap(Promise.all(n().articles.map((function(e){return M.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M.a.awrap(ve(e.author).then((function(t){return e.display=t})));case 2:return t.abrupt("return",e);case 3:case"end":return t.stop()}}))}))));case 3:r=i.sent,t(K(JSON.parse(JSON.stringify(r)).filter((function(e){return a.test(e.title)||a.test(e.body)||a.test(e.display)}))));case 5:case"end":return i.stop()}}))}},se=function(e){return function(t){return function(e){return T.a.post(P+"/article",e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){return e.data}),(function(e){return e.response.data}))}(e).then((function(){return t(le())}))}},le=function(){return function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return T.a.get(P+"/articles/"+e,{params:{limit:10,skip:0}}).then((function(e){return e.data}),(function(e){return e.response.data}))}().then((function(t){return e(K(t.articles))}))}},ce=function(){return function(e,t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return T.a.get(P+"/following/"+e).then((function(e){return e.data}),(function(e){return e.response.data}))}(t().username).then((function(t){return e(Z(t.following))}))}},de=function(){return function(e,t){return J(t().username).then((function(t){return e(V(t.display))}))}},pe=function(){return function(e,t){return F(t().username).then((function(t){return e(Y(t.status))}))}},me=function(){return function(e,t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return T.a.get(P+"/dob/"+e).then((function(e){return e.data}),(function(e){return e.response.data}))}(t().username).then((function(t){return e((n=t.dob,{type:h,payload:n}));var n}))}},he=function(){return function(e,t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return T.a.get(P+"/email/"+e).then((function(e){return e.data}),(function(e){return e.response.data}))}(t().username).then((function(t){return e($(t.email))}))}},fe=function(){return function(e,t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return T.a.get(P+"/phone/"+e).then((function(e){return e.data}),(function(e){return e.response.data}))}(t().username).then((function(t){return e(H(t.phone))}))}},ge=function(){return function(e,t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return T.a.get(P+"/zip/"+e).then((function(e){return e.data}),(function(e){return e.response.data}))}(t().username).then((function(t){return e(W(t.zip))}))}},be=function(){return function(e,t){return q(t().username).then((function(t){return e(G(t.avatar))}))}},ve=function(e){return J(e).then((function(e){return e.display}))},Ee=function(e){return q(e).then((function(e){return e.avatar}))},ye=function(e){return function(t){return function(e){return T.a.put(P+"/headline",{status:e}).then((function(e){return e.data}),(function(e){return e.response.data}))}(e).then((function(e){return t(Y(e.status))}))}},Oe=function(e){return function(t){return function(e){return T.a.put(P+"/display",{display:e}).then((function(e){return e.data}),(function(e){return e.response.data}))}(e).then((function(e){return t(V(e.display))}))}},we=function(e){return function(t){return function(e){return T.a.put(P+"/email",{email:e}).then((function(e){return e.data}),(function(e){return e.response.data}))}(e).then((function(e){return t($(e.email))}))}},je=function(e){return function(t){return function(e){return T.a.put(P+"/phone",{phone:e}).then((function(e){return e.data}),(function(e){return e.response.data}))}(e).then((function(e){return t(H(e.phone))}))}},ke=function(e){return function(t){return function(e){return T.a.put(P+"/zip",{zip:e}).then((function(e){return e.data}),(function(e){return e.response.data}))}(e).then((function(e){return t(W(e.zip))}))}},Ce=function(e){return function(t){return function(e){var t=new FormData;return t.append("image",e),T.a.put(P+"/avatar",t).then((function(e){return e.data}),(function(e){return e.response.data}))}(e).then((function(e){return t(G(e.avatar))}))}},Se=function(e){return function(e){return T.a.put(P+"/password",{password:e}).then((function(e){return e.data}),(function(e){return e.response.data}))}(e)},xe=function(e){return function(t){if(RegExp(te[e.name]).test(e.value)){if("password"===e.name&&e.value!==e.confirm)return ee.password;switch(e.name){case"display":t(Oe(e.value));break;case"email":t(we(e.value));break;case"phone":t(je(e.value));break;case"zip":t(ke(e.value));break;case"avatar":t(Ce(e.value));break;case"password":Se(e.value);break;default:return""}return""}return ee[e.name]}},Ne=function(e){return function(t){return""===e?"":(F(e).then((function(e){if("user does not exist"===e.message)return"User does not exist"})),function(e){return T.a.put(P+"/following/"+e).then((function(e){return e.data}),(function(e){return e.response.data}))}(e).then((function(e){return"failed"===e.result?e.message:(t(Z(e.following)),"")})))}},_e=function(e){return function(t){return F(e).then((function(e){if("user does not exist"===e.message)return"User does not exist"})),function(e){return T.a.delete(P+"/following/"+e).then((function(e){return e.data}),(function(e){return e.response.data}))}(e).then((function(e){return"failed"===e.result?e.message:(t(Z(e.following)),"")}))}},De=function(e,t){return function(n){return function(e,t){return T.a.put(P+"/articles/"+e,t).then((function(e){return e.data}),(function(e){return e.response.data}))}(e,t).then((function(){return n(le())}))}},Ae=function(){return T.a.get(P+"/auth").then((function(e){return e.data}))};n(15);var Ie=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(S.a)(this,Object(x.a)(t).call(this,e)))._isMounted=!1,n.handleSubmit=function(e){e.preventDefault();var t=n.state,a=t.username,r=t.password;n.props.login(a,r).then((function(e){n._isMounted&&n.setState({error:e})}))},n.state={username:"",password:"",error:""},n.handleChange=n.handleChange.bind(Object(I.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(I.a)(n)),n}return Object(N.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"handleChange",value:function(e){this.setState(Object(A.a)({},e.target.id,e.target.value))}},{key:"render",value:function(){var e=this.state,t=e.username,n=e.password,a=e.error;return r.a.createElement("nav",{className:"navbar bg-orange justify-content-start",id:"login-nav"},r.a.createElement("div",{className:"container"},r.a.createElement("a",{id:"ricebook",href:"."},r.a.createElement("h1",null,"ricebook")),r.a.createElement("div",{id:"login-form"},r.a.createElement("form",{noValidate:!0,onSubmit:this.handleSubmit},r.a.createElement("span",null,a),r.a.createElement("input",{id:"username",className:"input login-input",type:"text",placeholder:"username",value:t,onChange:this.handleChange}),r.a.createElement("input",{id:"password",className:"input login-input",type:"password",placeholder:"password",value:n,onChange:this.handleChange}),r.a.createElement("button",{id:"login-btn",type:"submit"},r.a.createElement("svg",{enableBackground:"new 0 0 512 512",height:"512",viewBox:"0 0 512 512",width:"512",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"m322.222 451.111h-257.778v-386.667h257.778v32.222h64.444v-96.666h-386.666v515.556h386.667v-96.667h-64.444v32.222z"}),r.a.createElement("path",{d:"m396.107 138.329-45.564 45.564 41.662 41.662h-166.65v64.445h166.65l-41.662 41.662 45.564 45.564 119.449-119.449z"})),"login")),r.a.createElement("a",{href:"https://www.cfregly.com/ricebook/auth/facebook"},"Facebook"))))}}]),t}(r.a.Component),ze=Object(u.b)(null,(function(e){return{login:function(t,n){return e(ae(t,n))}}}))(Ie),Me=n(23);var Be=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(S.a)(this,Object(x.a)(t).call(this,e)))._isMounted=!1,n.handleSubmit=function(e){e.preventDefault();var t=n.state,a=t.first,r=t.last,i=t.reg_username,u=t.reg_email,o=t.phone,s=t.reg_zip,l=t.birthMonth,c=t.birthDay,d=t.birthYear,p=t.reg_password,m=t.confirm,h={username:i,display:a+" "+r,email:u,phone:o,zip:s,dob:d+"-"+{January:"01",February:"02",March:"03",April:"04",May:"05",June:"06",July:"07",August:"08",September:"09",October:"10",November:"11",December:"12"}[l]+"-"+c,password:p,status:"Set a status",followed:[],avatar:"https://res.cloudinary.com/he3svaiw5/image/upload/v1575142785/placeholder_lszink.jpg"};n.props.register([h,m]).then((function(e){n._isMounted&&n.setState({error:e})}))},n.state={months:["January","February","March","April","May","June","July","August","September","October","November","December"],first:"",last:"",reg_username:"",reg_email:"",phone:"",reg_zip:"",birthMonth:"January",birthDay:"01",birthYear:"2019",reg_password:"",confirm:"",error:""},n.handleChange=n.handleChange.bind(Object(I.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(I.a)(n)),n}return Object(N.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"handleChange",value:function(e){this.setState(Object(A.a)({},e.target.id,e.target.value))}},{key:"getBirthDayArray",value:function(){var e=this.state.birthMonth;return["January","March","May","July","August","October","December"].includes(e)?Object(Me.a)(Array(31).keys()).map((function(e){return e+1})).map((function(e){return e<10?"0"+e.toString():e.toString()})):["April","June","September","November"].includes(e)?Object(Me.a)(Array(30).keys()).map((function(e){return e+1})).map((function(e){return e<10?"0"+e.toString():e.toString()})):Object(Me.a)(Array(28).keys()).map((function(e){return e+1})).map((function(e){return e<10?"0"+e.toString():e.toString()}))}},{key:"render",value:function(){var e=this.state,n=e.months,a=e.first,i=e.last,u=e.reg_username,o=e.reg_email,s=e.phone,l=e.reg_zip,c=e.birthMonth,d=e.birthDay,p=e.birthYear,m=e.reg_password,h=e.confirm,f=e.error;return r.a.createElement("div",{id:"register"},r.a.createElement("div",null,r.a.createElement("h1",{id:"signup-text"},"Sign up"),r.a.createElement("p",{id:"register-tagline"},"It's quick and easy")),r.a.createElement("form",{noValidate:!0,id:"register-form",onSubmit:this.handleSubmit},r.a.createElement("div",null,r.a.createElement("input",{name:"first",id:"first",className:"signup-input register-1",type:"text",placeholder:"first name",value:a,onChange:this.handleChange,required:!0}),r.a.createElement("input",{name:"last",id:"last",className:"signup-input register-2",type:"text",placeholder:"last name",value:i,onChange:this.handleChange,required:!0})),r.a.createElement("div",null,r.a.createElement("input",{name:"username",id:"reg_username",className:"signup-input register-1",type:"text",placeholder:"username",value:u,onChange:this.handleChange,required:!0}),r.a.createElement("input",{name:"zip",id:"reg_zip",className:"signup-input",type:"text",placeholder:"zipcode",value:l,onChange:this.handleChange,required:!0})),r.a.createElement("div",null,r.a.createElement("input",{name:"email",id:"reg_email",className:"signup-input register-1",type:"text",placeholder:"email",value:o,onChange:this.handleChange,required:!0}),r.a.createElement("input",{name:"phone",id:"phone",className:"signup-input register-2",type:"text",placeholder:"phone",value:s,onChange:this.handleChange,maxLength:10,required:!0})),r.a.createElement("div",{id:"register-birth"},r.a.createElement("p",{id:"register-birth-txt"},"birthday"),r.a.createElement("div",{id:"register-dropdowns"},r.a.createElement("div",{className:"register-dropdown"},r.a.createElement("select",{required:!0,id:"birthMonth",name:"month",size:"1",value:c,onChange:this.handleChange},n.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",{className:"register-dropdown",id:"register-birth-day"},r.a.createElement("select",{required:!0,id:"birthDay",name:"day",size:"1",value:d,onChange:this.handleChange},this.getBirthDayArray().map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("div",{className:"register-dropdown"},r.a.createElement("select",{required:!0,id:"birthYear",name:"year",size:"1",value:p,onChange:this.handleChange},t.getBirthYearArray().map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))))),r.a.createElement("div",null,r.a.createElement("input",{name:"password",id:"reg_password",className:"signup-input register-1",type:"password",placeholder:"password",value:m,required:!0,onChange:this.handleChange,minLength:6}),r.a.createElement("input",{name:"confirm",id:"confirm",className:"signup-input register-2",type:"password",placeholder:"confirm",value:h,onChange:this.handleChange,required:!0})),r.a.createElement("div",null,r.a.createElement("input",{id:"register-btn",type:"submit",value:"register"}))),r.a.createElement("p",{id:"register-error"},f))}}],[{key:"getBirthYearArray",value:function(){return Object(Me.a)(Array(100).keys()).map((function(e){return e+1920})).reverse()}}]),t}(r.a.Component),Te=Object(u.b)(null,(function(e){return{register:function(t){return e(ie(t))}}}))(Be);var Pe=function(e){function t(){return Object(k.a)(this,t),Object(S.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){this.props.loginPast()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ze,null),r.a.createElement("div",{className:"bg-main container"},r.a.createElement("div",{className:"row",id:"landing-main"},r.a.createElement("div",{id:"graphic-container",className:"col"},r.a.createElement(Je,null)),r.a.createElement("div",{className:"col"},r.a.createElement(Te,null)))))}}]),t}(r.a.Component),Je=function(e){function t(){return Object(k.a)(this,t),Object(S.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("img",{id:"landing-graphic",src:n(71),alt:"landing graphic"}))}}]),t}(r.a.Component),Fe=Object(u.b)(null,(function(e){return{loginPast:function(){return e(ne())}}}))(Pe);var qe=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(S.a)(this,Object(x.a)(t).call(this,e))).handleClick=n.handleClick.bind(Object(I.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(I.a)(n)),n}return Object(N.a)(t,e),Object(C.a)(t,[{key:"handleClick",value:function(){return this.props.logout(),r.a.createElement(D.a,{to:"/"})}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.getArticles().then((function(){return t.props.search({filter:document.getElementById("search-field").value})}))}},{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar bg-orange justify-content-start",id:"nav"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{id:"nav-left"},r.a.createElement(_.b,{to:"/home",className:"",id:"home"},r.a.createElement("span",{id:"r"},"r")),r.a.createElement("form",{id:"search-bar",onSubmit:this.handleSubmit,className:"form-inline"},r.a.createElement("input",{id:"search-field",type:"text",placeholder:"search posts"}),r.a.createElement("input",{type:"submit",className:"hidden"}))),r.a.createElement("div",{id:"nav-right"},r.a.createElement(_.b,{to:"/profile",className:"nav-btn"},r.a.createElement("svg",{enableBackground:"new 0 0 515.556 515.556",height:"512",viewBox:"0 0 258.75 258.75",width:"512",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("circle",{cx:"129.375",cy:"60",r:"60"}),r.a.createElement("path",{d:"M129.375,150c-60.061,0-108.75,48.689-108.75,108.75h217.5C238.125,198.689,189.436,150,129.375,150z"})),"profile"),r.a.createElement("button",{name:"logout",className:"nav-btn",onClick:this.handleClick},r.a.createElement("svg",{enableBackground:"new 0 0 515.556 515.556",height:"512",viewBox:"0 0 515.556 515.556",width:"512",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("path",{d:"m322.222 451.111h-257.778v-386.667h257.778v32.222h64.444v-96.666h-386.666v515.556h386.667v-96.667h-64.444v32.222z"}),r.a.createElement("path",{d:"m396.107 138.329-45.564 45.564 41.662 41.662h-166.65v64.445h166.65l-41.662 41.662 45.564 45.564 119.449-119.449z"})),"logout"))))}}]),t}(r.a.Component),Le=Object(u.b)(null,(function(e){return{logout:function(){return e(ue())},getArticles:function(){return e(le())},search:function(t){return e(oe(t))}}}))(qe);var Re=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(S.a)(this,Object(x.a)(t).call(this,e))).handleSubmit=n.handleSubmit.bind(Object(I.a)(n)),n}return Object(N.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){this.props.getStatus(),this.props.getDisplay(),this.props.getAvatar()}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.setStatus(document.getElementById("new-status").value),document.getElementById("new-status-form").reset()}},{key:"render",value:function(){return r.a.createElement("div",{className:"status-card",id:"status"},r.a.createElement(Ue,{display:this.props.display,status:this.props.status,avatar:this.props.avatar}),r.a.createElement("form",{id:"new-status-form",className:"status-update",onSubmit:this.handleSubmit},r.a.createElement("input",{id:"new-status",className:"status-input",placeholder:"update status",type:"text",maxLength:"40"}),r.a.createElement("button",{className:"status-set",type:"submit"},"set")))}}]),t}(r.a.Component),Ue=function(e){function t(){return Object(k.a)(this,t),Object(S.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){var e=this.props,t=e.display,n=e.status,a=e.avatar;return r.a.createElement("div",{id:"inner-card"},r.a.createElement("img",{src:a,alt:"profile img",className:"card_img"}),r.a.createElement("div",{id:"card_info"},r.a.createElement("p",{id:"card_name"},t),r.a.createElement("p",{"data-name":"status",id:"card_status"},n)))}}]),t}(r.a.Component),Ve=Object(u.b)((function(e){return{display:e.display,status:e.status,avatar:e.avatar}}),(function(e){return{setStatus:function(t){return e(ye(t))},getStatus:function(){return e(pe())},getDisplay:function(){return e(de())},getAvatar:function(){return e(be())}}}))(Re);function Ye(e){return{following:e.following}}function Ze(e){return{getFollowing:function(){return e(ce())},follow:function(t){return e(Ne(t))},unfollow:function(t){return e(_e(t))},getArticles:function(){return e(le())}}}var $e=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(S.a)(this,Object(x.a)(t).call(this,e))).state={error:""},n.handleSubmit=n.handleSubmit.bind(Object(I.a)(n)),n}return Object(N.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){this.props.getFollowing()}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.follow(document.getElementById("follow-user").value).then((function(e){return t.setState({error:e})})).then((function(){return t.props.getArticles()})),document.getElementById("follow-user").value=""}},{key:"render",value:function(){return r.a.createElement("div",{className:"status-card",id:"friends"},r.a.createElement("p",{className:"header-txt"},"Following"),r.a.createElement("div",{id:"friends-cards"},void 0===this.props.following||0===this.props.following.length?r.a.createElement("p",null):this.props.following.map((function(e){return r.a.createElement(We,{key:e,username:e})}))),r.a.createElement("form",{onSubmit:this.handleSubmit,className:"status-update"},r.a.createElement("input",{id:"follow-user",className:"status-input",placeholder:"follow user",type:"text"}),r.a.createElement("button",{className:"status-set",type:"submit"},"add"),r.a.createElement("p",{id:"follow-error"},this.state.error)))}}]),t}(r.a.Component),He=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(S.a)(this,Object(x.a)(t).call(this,e))).state={display:"",status:"",avatar:""},n.handleClick=n.handleClick.bind(Object(I.a)(n)),n}return Object(N.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e,t=this;ve(this.props.username).then((function(e){return t.setState({display:e})})),(e=this.props.username,F(e).then((function(e){return e.status}))).then((function(e){return t.setState({status:e})})),Ee(this.props.username).then((function(e){return t.setState({avatar:e})}))}},{key:"handleClick",value:function(e){var t=this;e.preventDefault(),this.props.unfollow(this.props.username).then((function(){return t.props.getArticles()}))}},{key:"render",value:function(){return r.a.createElement("div",{id:"card"},r.a.createElement("button",{onClick:this.handleClick,id:"unfollow"}),r.a.createElement("div",{id:"inner-card"},r.a.createElement("img",{src:this.state.avatar,alt:"profile img",className:"card_img"}),r.a.createElement("div",{id:"card_info"},r.a.createElement("p",{id:"card_name"},this.state.display),r.a.createElement("p",{id:"card_status"},this.state.status))))}}]),t}(r.a.Component),We=Object(u.b)(Ye,Ze)(He),Ge=Object(u.b)(Ye,Ze)($e);function Ke(e){return{getArticles:function(){return e(le())},getFollowing:function(){return e(ce())},updateArticle:function(t,n){return e(De(t,n))}}}var Qe=function(e){return{articles:e.articles}},Xe=function(e){function t(){return Object(k.a)(this,t),Object(S.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getFollowing().then((function(){return e.props.getArticles()}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"posts"},void 0===this.props.articles||0===this.props.articles.length?r.a.createElement("p",{id:"no-posts"},"There's nothing here \xaf\\_(\u30c4)_/\xaf"):this.props.articles.map((function(e){return r.a.createElement(at,{key:e._id,article:e})})))}}]),t}(r.a.Component),et=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(S.a)(this,Object(x.a)(t).call(this,e)))._isMounted=!1,n.state={author:"",avatar:"",comment:""},n.addComment=n.addComment.bind(Object(I.a)(n)),n.handleChange=n.handleChange.bind(Object(I.a)(n)),n}return Object(N.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,ve(this.props.article.author).then((function(t){return e._isMounted?e.setState({author:t}):""})),Ee(this.props.article.author).then((function(t){return e._isMounted?e.setState({avatar:t}):""}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"addComment",value:function(e){e.preventDefault(),this.props.updateArticle(this.props.article._id,{text:this.state.comment,commentId:"-1"}),e.target.reset()}},{key:"handleChange",value:function(e){this.setState({comment:e.target.value})}},{key:"render",value:function(){return r.a.createElement("div",{className:"status-card",id:"post"},r.a.createElement("div",{id:"post-top"},r.a.createElement("div",{id:"post-info"},r.a.createElement("img",{id:"post-img",src:this.state.avatar,alt:"profile img"}),r.a.createElement("div",{id:"post-user-info"},r.a.createElement("p",{id:"post-name"},this.state.author),r.a.createElement("p",{id:"post-date"},new Date(this.props.article.date).toDateString()))),r.a.createElement("input",{id:"post-edit",type:"image",src:n(73),alt:"edit post"})),r.a.createElement("p",{id:"post-title"},this.props.article.title),r.a.createElement("p",{id:"post-txt"},this.props.article.body),""!==this.props.article.picture?r.a.createElement("img",{id:"post-photo",src:this.props.article.picture,alt:"img post"}):r.a.createElement("span",null),r.a.createElement(tt,{comments:this.props.article.comments}),r.a.createElement("form",{onSubmit:this.addComment},r.a.createElement("input",{id:"post-comment",type:"text",placeholder:"comment",onChange:this.handleChange}),r.a.createElement("input",{type:"submit",className:"hidden"})))}}]),t}(r.a.Component),tt=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(S.a)(this,Object(x.a)(t).call(this,e))).state={collapsed:!0},n.handleClick=n.handleClick.bind(Object(I.a)(n)),n}return Object(N.a)(t,e),Object(C.a)(t,[{key:"handleClick",value:function(e){e.preventDefault(),this.setState({collapsed:!this.state.collapsed})}},{key:"render",value:function(){return r.a.createElement("div",{id:"comments"},r.a.createElement("input",{id:"collapse",type:"button",value:this.state.collapsed?"view comments":"hide comments",onClick:this.handleClick}),r.a.createElement("div",null,this.state.collapsed?"":this.props.comments.map((function(e){return r.a.createElement(rt,{key:e._id,comment:e})}))))}}]),t}(r.a.Component),nt=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(S.a)(this,Object(x.a)(t).call(this,e))).state={author:"",avatar:""},n}return Object(N.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this;ve(this.props.comment.author).then((function(t){return e.setState({author:t})})),Ee(this.props.comment.author).then((function(t){return e.setState({avatar:t})}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"comment"},r.a.createElement("img",{src:this.state.avatar,alt:"profile img"}),r.a.createElement("p",null,r.a.createElement("b",null,this.state.author)," ",this.props.comment.body))}}]),t}(r.a.Component),at=Object(u.b)(Qe,Ke)(et),rt=Object(u.b)(Qe,Ke)(nt),it=Object(u.b)(Qe,Ke)(Xe);var ut=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(S.a)(this,Object(x.a)(t).call(this,e))).state={image:""},n.handleSubmit=n.handleSubmit.bind(Object(I.a)(n)),n.handleImageChange=n.handleImageChange.bind(Object(I.a)(n)),n}return Object(N.a)(t,e),Object(C.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=new FormData;t.append("title",document.getElementById("new-post-title").value),t.append("body",document.getElementById("new-post-body").value),""!==this.state.image&&t.append("image",this.state.image),this.props.postArticle(t),this.setState({image:""}),document.getElementById("new-post-form").reset()}},{key:"handleImageChange",value:function(e){var t=e.target.files[0];"image/jpeg"===t.type&&this.setState({image:t})}},{key:"render",value:function(){return r.a.createElement("div",{className:"status-card",id:"new-post"},r.a.createElement("form",{id:"new-post-form",onSubmit:this.handleSubmit},r.a.createElement("div",{id:"new-post-top"},r.a.createElement("p",{className:"header-txt"},"New Post"),r.a.createElement("span",{id:"img-upload"},r.a.createElement("label",{htmlFor:"upload-btn"},r.a.createElement("img",{id:"new-post-add-image",src:n(74),alt:"add pic"})),r.a.createElement("input",{id:"upload-btn",type:"file",accept:"image/*",onChange:this.handleImageChange}))),r.a.createElement("div",{id:"new-post-added-img"}),r.a.createElement("input",{id:"new-post-title",required:!0,type:"text",placeholder:"title",maxLength:50}),r.a.createElement("textarea",{id:"new-post-body",required:!0,rows:"7",cols:"50",placeholder:"write something"}),r.a.createElement("div",{id:"new-post-bot"},r.a.createElement("input",{type:"submit",id:"new-post-post-btn",value:"post"}),r.a.createElement("input",{type:"reset",id:"new-post-cancel-btn",value:"cancel"}))))}}]),t}(r.a.Component),ot=Object(u.b)((function(e){return{username:e.username}}),(function(e){return{postArticle:function(t){return e(se(t))}}}))(ut),st=function(e){function t(){return Object(k.a)(this,t),Object(S.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(C.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Le,null),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row",id:"main"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"stick"},r.a.createElement(Ve,null),r.a.createElement(Ge,null))),r.a.createElement("div",{className:"col-6"},r.a.createElement(it,null)),r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"stick"},r.a.createElement(ot,null))))))}}]),t}(r.a.Component);var lt=function(e){function t(e){var n;return Object(k.a)(this,t),(n=Object(S.a)(this,Object(x.a)(t).call(this,e))).state={toggles:{username:!0,display:!0,birth:!0,email:!0,phone:!0,zip:!0,password:!0},error:"",refresh:!0,confirmHidden:!0,link:"",auth:{}},n.handleClick=n.handleClick.bind(Object(I.a)(n)),n.handleImageChange=n.handleImageChange.bind(Object(I.a)(n)),n}return Object(N.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){var e=this;return M.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return this.props.getDisplay(),this.props.getBirth(),this.props.getEmail(),this.props.getPhone(),this.props.getZip(),this.props.getAvatar(),document.getElementById("profile-img").style.background="url('"+this.props.avatar+"') no-repeat",document.getElementById("profile-img").style.backgroundSize="contain",t.next=10,M.a.awrap(Ae().then((function(t){return e.setState({auth:t.auth})})));case 10:2===Object.keys(this.state.auth).length?this.props.username===this.state.auth.rice?this.setState({link:"unlink facebook"}):this.setState({link:"unlink ricebook"}):this.state.auth.hasOwnProperty("rice")?this.setState({link:"link facebook"}):this.state.auth.hasOwnProperty("facebook")?this.setState({link:"link rice"}):this.setState({link:"error"});case 11:case"end":return t.stop()}}),null,this)}},{key:"handleClick",value:function(e){e.preventDefault();var t=e.target.name,n=this.state.toggles;if(n[t])"password"===t&&(this.setState({confirmHidden:!1}),document.getElementById("password-value").value="",document.getElementById("confirm-value").value=""),n[t]=!n[t],this.setState({toggles:n});else{var a={name:t,value:document.getElementById(t+"-value").value},r=document.getElementById("confirm-value").value;"password"===t&&(a.confirm=r);var i=this.props.editProfile(a);""===i&&(n[t]=!n[t],this.setState({confirmHidden:!0,refresh:!this.state.refresh})),this.setState({error:i})}}},{key:"handleImageChange",value:function(e){var t=e.target.files[0];"image/jpeg"===t.type&&this.props.setAvatar(t)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Le,null),r.a.createElement("div",{id:"profile"},r.a.createElement("div",{id:"profile-box"},r.a.createElement("div",null,r.a.createElement("span",{id:"img-upload"},r.a.createElement("label",{htmlFor:"change-profile"},r.a.createElement("div",{id:"profile-img"})),r.a.createElement("input",{id:"change-profile",type:"file",accept:"image/*",onChange:this.handleImageChange}))),r.a.createElement("table",{id:"profile-table"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Username"),r.a.createElement("td",{className:"profile-table-center"},r.a.createElement("input",{id:"username-value",readOnly:this.state.toggles.username,defaultValue:this.props.username}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Display"),r.a.createElement("td",{className:"profile-table-center"},r.a.createElement("input",{id:"display-value",readOnly:this.state.toggles.display,defaultValue:this.props.display})),r.a.createElement("td",null,r.a.createElement("input",{name:"display",className:"profile-edit-btn",type:"button",value:!0===this.state.toggles.display?"edit":"set",onClick:this.handleClick}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Birthday"),r.a.createElement("td",{className:"profile-table-center"},r.a.createElement("input",{id:"birth-value",readOnly:this.state.toggles.birth,defaultValue:this.props.birth}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Email"),r.a.createElement("td",{className:"profile-table-center"},r.a.createElement("input",{id:"email-value",readOnly:this.state.toggles.email,defaultValue:this.props.email})),r.a.createElement("td",null,r.a.createElement("input",{name:"email",className:"profile-edit-btn",type:"button",value:!0===this.state.toggles.email?"edit":"set",onClick:this.handleClick}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Phone"),r.a.createElement("td",{className:"profile-table-center"},r.a.createElement("input",{id:"phone-value",readOnly:this.state.toggles.phone,defaultValue:this.props.phone})),r.a.createElement("td",null,r.a.createElement("input",{name:"phone",className:"profile-edit-btn",type:"button",value:!0===this.state.toggles.phone?"edit":"set",onClick:this.handleClick}))),r.a.createElement("tr",null,r.a.createElement("th",null,"Zipcode"),r.a.createElement("td",{className:"profile-table-center"},r.a.createElement("input",{id:"zip-value",readOnly:this.state.toggles.zip,defaultValue:this.props.zip})),r.a.createElement("td",null,r.a.createElement("input",{name:"zip",className:"profile-edit-btn",type:"button",value:!0===this.state.toggles.zip?"edit":"set",onClick:this.handleClick}))),r.a.createElement("tr",{key:this.state.refresh},r.a.createElement("th",null,"Password"),r.a.createElement("td",{className:"profile-table-center"},r.a.createElement("input",{id:"password-value",readOnly:this.state.toggles.password,defaultValue:"*".repeat(10)})),r.a.createElement("td",null,r.a.createElement("input",{name:"password",className:"profile-edit-btn",type:"button",value:!0===this.state.toggles.password?"edit":"set",onClick:this.handleClick}))),r.a.createElement("tr",{hidden:this.state.confirmHidden},r.a.createElement("th",null,"Confirm"),r.a.createElement("td",{className:"profile-table-center"},r.a.createElement("input",{id:"confirm-value"}))))),r.a.createElement("p",null,this.state.error))))}}]),t}(r.a.Component),ct=Object(u.b)((function(e){return{username:e.username,display:e.display,birth:e.birth,email:e.email,phone:e.phone,zip:e.zip,avatar:e.avatar}}),(function(e){return{editProfile:function(t){return e(xe(t))},setAvatar:function(t){return e(Ce(t))},setDisplay:function(t){return e(Oe(t))},getDisplay:function(){return e(de())},getBirth:function(){return e(me())},getEmail:function(){return e(he())},getPhone:function(){return e(fe())},getZip:function(){return e(ge())},getAvatar:function(){return e(be())}}}))(lt);var dt=function(e){function t(){return Object(k.a)(this,t),Object(S.a)(this,Object(x.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(C.a)(t,[{key:"componentDidMount",value:function(){this.props.checkLogin()}},{key:"render",value:function(){var e=""!==this.props.username;return r.a.createElement(_.a,null,r.a.createElement(D.d,null,r.a.createElement(mt,{exact:!0,path:"/home",component:st,loggedIn:e}),r.a.createElement(mt,{exact:!0,path:"/profile",component:ct,loggedIn:e}),r.a.createElement(pt,{path:"/",component:Fe,loggedIn:e})))}}]),t}(a.Component),pt=function(e){var t=e.component,n=e.loggedIn;return r.a.createElement(D.b,{path:"/",render:function(){return!1===n?r.a.createElement(t,null):r.a.createElement(D.a,{to:"/home"})}})},mt=function(e){var t=e.path,n=e.component,a=e.loggedIn;return r.a.createElement(D.b,{exact:!0,path:t,render:function(){return!0===a?r.a.createElement(n,null):r.a.createElement(D.a,{to:"/"})}})},ht=Object(u.b)((function(e){return{username:e.username}}),(function(e){return{checkLogin:function(){return e(re())}}}))(dt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(i.render)(r.a.createElement(u.a,{store:j},r.a.createElement(ht,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[44,1,2]]]);
//# sourceMappingURL=main.a9186d1b.chunk.js.map